# Telemetry_Receiver
    
### Python Telemetry Receiver for collection Cisco NX-OS IOS-XR
    
    Telemetry format includes JSON GPB GPB-kv (Self-Description)
    This Python sample demo how to collect Telemetry mesasge via UDP and how to Parse message.
    
    Demo enviroment has N9K and XRv9K 
     N9K 10.75.59.198     version : nx-os 9.2.2
     xrv9k 10.75.58.60    version : xrv9k 6.4.1
     
    Telemetry Receiver UDP : port 57500
     
### Telemetry proto file for both GPB and GPB-kv

    use the follwoing command to make python proto output
    
    protoc --python_out=. ./telemetry.proto 
    
    //for GPB compact , demo message is system uptime ,use the following proto file generated by IOS-XR
    protoc --python_out=. ./uptime.proto 
    
### Telemetry GPB GPB-kv Collection ans parsed result as below 

    Telemetry GPB message from NX OS
    Node :DUT02
    IP Address (source port) :('10.75.58.198', 41532)
    Encodig Path :sys/procsys/sysmem
    GPB kv format
    dn:sys/procsys/sysmem
    free:26164608
    memstatus:OK
    name:sysmem
    total:32828228
    used:6663620
    ==================================================================
    Telemetry GPB message from NX OS
    Node :DUT02
    IP Address (source port) :('10.75.58.198', 41532)
    Encodig Path :show process cpu
    GPB kv format
    pid:1
    runtime:16411
    invoked:306652
    usecs:53
    onesec:0.00
    process:init
    =================================================================
    Telemetry GPB  message from IOX
    Node :XTC
    IP Address (source port) :('10.75.58.60', 32898)
    Encodig Path :Cisco-IOS-XR-shellutil-oper:system-time/uptime
    GPB compact format
    Content decoded here :
    Host Name :XTC
    System Up Time :1660 Seconds
    =================================================================

### Telemetry JSON Collection ans parsed result as below 

    =================================================================
    ('10.75.58.60', 33208)
    This is a System Uptime telemetry messgae
    Node =XTC
    Collection ID =236
    Host Name =XTC
    Uptime =3125
    Recevice Count =4
    Timestamp from Start =42.76471996307373
    =================================================================
    ('10.75.58.60', 33208)
    This is a System Uptime telemetry messgae
    Node =XTC
    Collection ID =237
    Host Name =XTC
    Uptime =3136
    Recevice Count =5
    Timestamp from Start =53.48438501358032
    =================================================================


### Will consolidate Json and GPB in one py file soon

    Base on Binary code , 1-4 bytes indicate mesage type ...